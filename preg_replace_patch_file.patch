diff --git a/vendor/magento/zendframework1/library/Zend/Db/Statement.php b/vendor/magento/zendframework1/library/Zend/Db/Statement.php
index 46d175c79..66647e4ec 100755
--- a/vendor/magento/zendframework1/library/Zend/Db/Statement.php
+++ b/vendor/magento/zendframework1/library/Zend/Db/Statement.php
@@ -218,6 +218,12 @@ abstract class Zend_Db_Statement implements Zend_Db_Statement_Interface
         $de = $this->_adapter->quoteIdentifier($d);
         $de = substr($de, 1, 2);
         $de = preg_quote($de);
+
+        if ($sql === null || empty($sql)) {
+            // this preg_replace call can return NULL in case of error (PREG_BACKTRACK_LIMIT_ERROR).
+            // In this case the result of this method will be an empty string.
+            return '';
+        }
         // Note: $de and $d where never used..., now they are:
         $sql = preg_replace("/$d($de|\\\\{2}|[^$d])*$d/Us", '', $sql);
         return $sql;
